{% set col_label = "col-lg-5 col-form-label text-lg-right pr-0 pr-lg-4" %}

{% macro settings_item(id, label, input_id, tooltip, min, max, snap, ticksnum, decimals=0) -%}
<tr class="settings-item" min="{{ min }}" max="{{ max }}" snap="{{ snap }}" ticksnum="{{ ticksnum }}" decimals="{{ decimals }}" id="{{ id }}">
    <td class="settings-item-label"><span class="settings-item-label">{{ label }}</span></td>
    <td class="settings-item-value"><input type="text" class="range styled prefs" id="{{ input_id }}"></td>
    <td><span class="help-mark" title="{{ tooltip }}">?</span></td>
</tr>
{%- endmacro %}

{% macro button(name, id, class="primary") -%}
<button class="btn btn-{{ class }} btn-block btn-sm" id="{{ id }}">{{ name }}</button>
{%- endmacro %}

{% macro input(label, id, type="text", required=false, tooltip="", readonly=false, autocapitalize="") -%}
<div class="{{ row_classes }}">
    <label for="{{ id }}" class="{{ col_label }}">
        {{ label }}
        {# need class hover to trigger on mobile #}
        <a tabindex="0" class="text-secondary d-block d-lg-none float-right" data-placement="top" data-toggle="popover" data-trigger="hover focus" 
            title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </label>
    <div class="{{ col_input }}">
        <input 
            class="form-control" 
            type="{{ type }}" 
            id="{{ id }}" 
            {% if readonly %} readonly="readonly"{% endif %} 
            {% if required %} required {% endif %} 
            {% if type == "password" %} autocomplete="new-password" {% endif %} 
            autocapitalize="{{ autocapitalize }}">
    </div>
    {{ help_column(label, tooltip) }}
</div>
{%- endmacro %}

{% macro info(label, value) -%}
<div class="{{ row_classes }} my-0 d-flex justify-content-between">
    <label class="col-form-label text-lg-right pr-4 py-1">
        {{ label }}
    </label>
    <div class="col-form-label py-1">
        {{ value }}
    </div>
</div>
{# <div class="{{ row_classes }} my-0">
    <label class="{{ col_label }} py-1">
    <label class="col-10 col-lg-5 col-form-label text-lg-right pr-4 py-1">
        {{ label }}
    </label>
    <div class="col-lg-7 col-form-label py-1">
        {{ value }}
    </div>
</div> #}
{%- endmacro %}

{% macro infoCallback(label, tooltip) -%}
<div class="{{ row_classes }} my-0 {% if label == "" %}py-lg-0 py-2{% endif %}">
    <label for="{{ id }}" class="{{ col_label }} {% if not label %}d-none d-lg-block{% endif %}">
    {# <label for="{{ id }}" class="{{ col_label }}"> #}
        {{ label }}
        {# need class hover to trigger on mobile #}
        <a tabindex="0" class="text-secondary d-block d-lg-none float-right" data-placement="top" data-toggle="popover" data-trigger="hover focus" 
            title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </label>
    <div class="{{ col_input }}">
        {{ caller() }}
    </div>
    {{ help_column(label, tooltip) }}
</div>
{%- endmacro %}
    
{% macro input_range(label, id, tooltip, min, max, snap, ticksnum, decimals=0) -%}
<div class="{{ row_classes }} align-items-center">
    <label class="{{ col_label }}" for="{{ id }}">
        <!-- <a tabindex="0" class="" data-toggle="popover" data-trigger="focus hover" title="Layout Columns" data-content="configures the number of columns used to lay out the camera frames"> -->
        {{ label }}
        <!-- </a> -->
        {# need class hover to trigger on mobile #}
        <a tabindex="0" class="text-secondary d-block d-lg-none float-right" data-placement="top" data-toggle="popover" data-trigger="hover focus" 
            title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </label>
    <div class="{{ col_input }}">
        <input type="range" id="{{ id }}" min="{{ min }}" max="{{ max }}" snap="{{ snap }}" ticksnum="{{ ticksnum }}" decimals="{{ decimals }}" class="custom-range align-bottom">
    </div>
    {{ help_column(label, tooltip) }}
    <!-- <small id="emailHelp" class="col form-text text-muted">configures the number of columns used to lay out the camera frames</small> -->
</div>
{%- endmacro %}

{% macro input_check(label, id, tooltip, min, max, snap, ticksnum, decimals=0) -%}
<div class="{{ row_classes }} custom-control custom-switch pl-0">
{# <div class="form-group form-row custom-control ml-n3 custom-switch pl-0"> #}

    {# positioning the checkbox is a dirty hack and may break somewhere #}
    {# both labels are required for this to work #}
    {# input checkbox is pushed around by the labels margins #}
    <label class="col-lg-5 float-left text-lg-right pr-4 pl-1 pl-lg-0 mr-n2" for="">
        {{ label }}
        <a tabindex="0" class="text-secondary d-block d-lg-none float-right mr-n4" data-placement="top" data-toggle="popover" data-trigger="hover focus" 
            title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </label>

    <input type="checkbox" class="custom-control-input" id="{{ id }}">

    {# A label *after* the input is required, wtf bootstrap #}
    {# col-auto to make it only as wide as the label #}
    <label class="col-auto ml-5 custom-control-label" for="{{ id }}">
        {# need class hover to trigger on mobile #}
        <!-- <a tabindex="0" class="text-info d-block d-lg-none float-right" data-placement="top" data-toggle="popover" data-trigger="hover focus" title="Fit Frames Vertically" data-content="controls whether frame sizes can be reduced to vertically fit the window or not">
            <i style="height:1rem" class="align-middle" data-feather="help-circle"></i>
        </a> -->
    </label>
    <!-- <div class="col-lg-1 mr-1 d-none d-lg-inline-block"> -->
    {# {{ help_column(label, tooltip) }} #}
    <div class="col-auto d-none d-lg-block text-right float-right">
        <a tabindex="0" class="text-secondary" data-placement="top" data-toggle="popover" data-trigger="hover focus" title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </div>
</div>

<div class="clearfix"></div>
{%- endmacro %}

{% macro input_check_bak(label, id, tooltip, min, max, snap, ticksnum, decimals=0) -%}
<div class="{{ row_classes }} custom-control custom-switch d-flex float-right">
    <input type="checkbox" class="custom-control-input" id="{{ id }}">
    {# col-auto to make it only as wide as the label #}
    <label class="col-auto ml-1 custom-control-label" for="{{ id }}">
        {{ label }}
        {# need class hover to trigger on mobile #}
        <!-- <a tabindex="0" class="text-info d-block d-lg-none float-right" data-placement="top" data-toggle="popover" data-trigger="hover focus" title="Fit Frames Vertically" data-content="controls whether frame sizes can be reduced to vertically fit the window or not">
            <i style="height:1rem" class="align-middle" data-feather="help-circle"></i>
        </a> -->
    </label>
    <!-- <div class="col-lg-1 mr-1 d-none d-lg-inline-block"> -->
    <div class="col text-right">
        <a tabindex="0" class="text-secondary" data-placement="top" data-toggle="popover" data-trigger="hover focus" title="{{ label }}" data-content="{{ tooltip }}">
            {{ help_icon }}
        </a>
    </div>
</div>
<div class="clearfix"></div>
{%- endmacro %}